<template>
    <page-header title="Lobby" subtitle="available games appear here"></page-header>

    <div class="row">
        <div class="col">
            <game-stat stat.to-view="total" title="Games available"></game-stat>
        </div>
        <div class="col text-right">
            <button type="button" class="btn btn-secondary" click.delegate="refreshGames()">
                Refresh
            </button>
            <a class="btn btn-primary" route-href="route.bind: 'newgame'">
                Host a new game
            </a>
        </div>
    </div>

    <hr />

    <div class="row">
        <div class="col">
            <table class="table table-hover table-borderless">
                <thead>
                    <tr>
                        <th>Host player</th>
                        <th>Size</th>
                        <th>Mines</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr repeat.for="availableGame of availableGames">
                        <td>${ availableGame.hostPlayerDisplayName }</td>
                        <td>${ availableGame.rows }&times;${ availableGame.columns }</td>
                        <td>${ availableGame.mines }</td>
                        <td>
                            <form submit.delegate="joinGame(availableGame.gameId)">
                                <button type="submit" class="btn btn-primary">Join</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</template>
